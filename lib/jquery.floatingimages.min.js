(function(a){a.fn.extend({floatingimages:function(b){var e={imgObject:{},containerWidth:"300px",containerHeight:"288px",timer:3000,smallImageWidth:150,smallImageHeight:95,realImageWidth:"300px",realImageHeight:"195px",clondedImageBorder:"2px solid yellow",columnsPerRow:2};b=a.extend({},e,b);var d=[];var c=false;return this.each(function(){var k=b.imgObject;var m="";var s=b.containerWidth;var v=b.containerHeight;var g=b.timer;var p=b.smallImageWidth;var f=b.smallImageHeight;var h=b.realImageWidth;var j=b.realImageHeight;var t=b.clondedImageBorder;var r=b.columnsPerRow;var q,o;function u(){var i=0;for(o=0;o<k.length;o++){m+='<img src="'+k[o].imgName+'" id="image'+o+'" width="'+(parseInt(s,10)/r)+'" height="'+Math.floor(parseInt(v,10)/(k.length/r))+'" />';a("#image"+o).css({padding:"0px",margin:"0px",border:"0px"});i++;if(i%r===0){a(".images").css({width:s,height:Math.floor(parseInt(v,10)/(k.length/r))+"px"});a("#container").append('<div class="images">'+m+"</div>");m=""}}}u();preLoadImages=setInterval(function(){var z=true;var w=a("#container img");for(var y=0;y<w.length;y++){var x=w[y];if(x.complete==false){z=false}}if(z){a("#container").everyTime(g,"timedShow",function(A){n(A)});clearInterval(preLoadImages)}},1000);a("#container").css({width:s,height:v});a("#viewPortPhoto").css({width:parseInt(h,10)-2*(parseInt(t,10))+"px",height:j,top:Math.floor((parseInt(v,10)/2)-(parseInt(j,10)/2))+"px",left:Math.floor((parseInt(s,10)/2)-(parseInt(h,10)/2))+"px"});a(".hint").css({width:parseInt(h,10)-2*(parseInt(t,10))+"px",opacity:0.5});function n(y){if(y%2===0){a(".hint").css({display:"none"});q=Math.round(Math.random()*4);switch(q){case 0:a("#viewPortPhoto img").effect("explode",{pieces:25},1500);break;case 1:a("#viewPortPhoto img").effect("drop",{direction:"up"},1500);break;case 2:a("#viewPortPhoto img").effect("fold",{},1500);break;case 3:a("#viewPortPhoto img").effect("puff",{},1500);break;case 4:a("#viewPortPhoto img").effect("clip",{direction:"vertical"},1000);break;default:a("#viewPortPhoto img").effect("clip",{direction:"vertical"},1000);break}return}q=l();var A=a("#image"+q);var w=A.clone();var x=A.attr("src");d[d.length]={imgName:a(A).attr("id")};w.css({display:"none"});a("#viewPortPhoto").append(w);if(k[q].imgLink!==""){w.css("cursor","pointer");w.wrap("<a href='"+k[q].imgLink+"' target='_blank'></a>")}a(".transferring").css("border",t);a(".ui-effects-transfer").css("border",t);w.css({border:t,"background-image":"url('"+x+"')"});A.effect("transfer",{className:"transferring",to:"div#viewPortPhoto"},1000,function z(){w.css({display:"block",width:parseInt(h,10)-(2*parseInt(t,10))+"px",height:j});a(".hint").html(k[q].imgText);if(k[q].imgLink!==""){a(".hint").html(k[q].imgText);a(".hint").show("slide",{direction:"up"},"slow",function i(){a(".hint").css({display:"block",opacity:0.5})})}w.mouseover(function(){a("#container").stopTime("timedShow")});w.mouseout(function(){w.fadeOut(1500);a(".hint").css({display:"none"});a("#container").everyTime(g,"timedShow",function(B){n(B)})});if(d.length>1){jQuery.each(d,function(B,C){if(B===0){a("#viewPortPhoto #"+C.imgName).remove();d.shift()}})}});a(".transferring").css({"background-image":"url('"+x+"')"})}function l(){return Math.round(Math.random()*(k.length-1))}})}})})(jQuery);